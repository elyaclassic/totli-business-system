{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4 class="mb-0"><i class="bi bi-list-ul"></i> Bo'limlar, Omborlar, Kassalar</h4>
        <p class="text-muted small mb-0">Admin barcha ro'yxatlarni ko'radi, qo'shish va tahrirlash uchun har bir bo'limga o'ting.</p>
    </div>

    <div class="row g-4">
        <!-- Bo'limlar -->
        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-diagram-3"></i> Bo'limlar</span>
                    <a href="/info/departments" class="btn btn-sm btn-outline-primary">Barchasi</a>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm table-hover mb-0">
                            <thead class="table-light">
                                <tr><th>Nomi</th><th>Kod</th></tr>
                            </thead>
                            <tbody>
                                {% for d in departments %}
                                <tr>
                                    <td>{{ d.name }}</td>
                                    <td><code>{{ d.code }}</code></td>
                                </tr>
                                {% else %}
                                <tr><td colspan="2" class="text-muted text-center py-3">Bo'limlar yo'q</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/info/departments" class="btn btn-success btn-sm w-100"><i class="bi bi-plus-circle"></i> Qo'shish / Tahrirlash</a>
                </div>
            </div>
        </div>

        <!-- Omborlar -->
        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-building"></i> Omborlar</span>
                    <a href="/info/warehouses" class="btn btn-sm btn-outline-primary">Barchasi</a>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm table-hover mb-0">
                            <thead class="table-light">
                                <tr><th>Nomi</th><th>Kod</th></tr>
                            </thead>
                            <tbody>
                                {% for w in warehouses %}
                                <tr>
                                    <td>{{ w.name }}</td>
                                    <td><code>{{ w.code or '-' }}</code></td>
                                </tr>
                                {% else %}
                                <tr><td colspan="2" class="text-muted text-center py-3">Omborlar yo'q</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/info/warehouses" class="btn btn-success btn-sm w-100"><i class="bi bi-plus-circle"></i> Qo'shish / Tahrirlash</a>
                </div>
            </div>
        </div>

        <!-- Kassalar -->
        <div class="col-lg-4">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="bi bi-cash-stack"></i> Kassalar</span>
                    <a href="/info/cash" class="btn btn-sm btn-outline-primary">Barchasi</a>
                </div>
                <div class="card-body p-0">
                    <div class="table-responsive">
                        <table class="table table-sm table-hover mb-0">
                            <thead class="table-light">
                                <tr><th>Nomi</th><th>Balans</th></tr>
                            </thead>
                            <tbody>
                                {% for c in cash_registers %}
                                <tr>
                                    <td>{{ c.name }}</td>
                                    <td>{{ "{:,.0f}".format(c.balance or 0) }}</td>
                                </tr>
                                {% else %}
                                <tr><td colspan="2" class="text-muted text-center py-3">Kassalar yo'q</td></tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="card-footer">
                    <a href="/info/cash" class="btn btn-success btn-sm w-100"><i class="bi bi-plus-circle"></i> Qo'shish / Tahrirlash</a>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-4 p-3 bg-light rounded">
        <p class="mb-0 small text-muted">
            <i class="bi bi-info-circle"></i>
            Foydalanuvchiga bo'lim, ombor yoki kassa biriktirish uchun
            <a href="/info/users">Foydalanuvchilar</a> bo'limida foydalanuvchini tahrirlang va Bo'lim / Ombor / Kassa tanlang.
        </p>
    </div>
</div>
{% endblock %}
